import{V as Et,r as d}from"./index-db117989.js";var pt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var s,n,i;if(Array.isArray(t)){if(s=t.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),s=i.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=s;n--!==0;){var f=i[n];if(!e(t[f],r[f]))return!1}return!0}return t!==t&&r!==r};const J=Et(pt);function jt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const mt=typeof window<"u"?d.useLayoutEffect:d.useEffect;function p(e,t){mt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function $t(e,t){e&&jt(e),p(`mantine-form:${e}:set-field-value`,r=>t.setFieldValue(r.detail.path,r.detail.value)),p(`mantine-form:${e}:set-values`,r=>t.setValues(r.detail)),p(`mantine-form:${e}:set-initial-values`,r=>t.setInitialValues(r.detail)),p(`mantine-form:${e}:set-errors`,r=>t.setErrors(r.detail)),p(`mantine-form:${e}:set-field-error`,r=>t.setFieldError(r.detail.path,r.detail.error)),p(`mantine-form:${e}:clear-field-error`,r=>t.clearFieldError(r.detail)),p(`mantine-form:${e}:clear-errors`,t.clearErrors),p(`mantine-form:${e}:reset`,t.reset),p(`mantine-form:${e}:validate`,t.validate),p(`mantine-form:${e}:validate-field`,r=>t.validateField(r.detail)),p(`mantine-form:${e}:reorder-list-item`,r=>t.reorderListItem(r.detail.path,r.detail.payload)),p(`mantine-form:${e}:remove-list-item`,r=>t.removeListItem(r.detail.path,r.detail.index)),p(`mantine-form:${e}:insert-list-item`,r=>t.insertListItem(r.detail.path,r.detail.item,r.detail.index)),p(`mantine-form:${e}:set-dirty`,r=>t.setDirty(r.detail)),p(`mantine-form:${e}:set-touched`,r=>t.setTouched(r.detail)),p(`mantine-form:${e}:reset-dirty`,r=>t.resetDirty(r.detail)),p(`mantine-form:${e}:reset-touched`,t.resetTouched)}function W(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,r)=>{const s=e[r];return s!=null&&s!==!1&&(t[r]=s),t},{})}function Ot(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:r}=t;r instanceof HTMLInputElement?r.type==="checkbox"?e(r.checked):e(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&e(r.value)}else e(t)}}function Q(e,t){const r=Object.keys(e);if(typeof t=="string"){const s=r.filter(n=>n.startsWith(`${t}.`));return e[t]||s.some(n=>e[n])||!1}return r.some(s=>e[s])}function tt(e,t){if(t===null||typeof t!="object")return{};const r={...t};return Object.keys(t).forEach(s=>{s.includes(`${String(e)}.`)&&delete r[s]}),r}function U(e,t){const r=e.substring(t.length+1).split(".")[0];return parseInt(r,10)}function Y(e,t,r,s){if(t===void 0)return r;const n=`${String(e)}`;let i=r;s===-1&&(i=tt(`${n}.${t}`,i));const f={...i},y=new Set;return Object.entries(i).filter(([c])=>{if(!c.startsWith(`${n}.`))return!1;const E=U(c,n);return Number.isNaN(E)?!1:E>=t}).forEach(([c,E])=>{const j=U(c,n),m=c.replace(`${n}.${j}`,`${n}.${j+s}`);f[m]=E,y.add(m),y.has(c)||delete f[c]}),f}function wt(e,{from:t,to:r},s){const n=`${e}.${t}`,i=`${e}.${r}`,f={...s};return Object.keys(s).every(y=>{let c,E;if(y.startsWith(n)&&(c=y,E=y.replace(n,i)),y.startsWith(i)&&(c=y.replace(i,n),E=y),c&&E){const j=f[c],m=f[E];return m===void 0?delete f[c]:f[c]=m,j===void 0?delete f[E]:f[E]=j,!1}return!0}),f}function et(e){return typeof e!="string"?[]:e.split(".")}function w(e,t){const r=et(e);if(r.length===0||typeof t!="object"||t===null)return;let s=t[r[0]];for(let n=1;n<r.length&&s!==void 0;n+=1)s=s[r[n]];return s}function C(e,t,r){typeof r.value=="object"&&(r.value=P(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function P(e){if(typeof e!="object")return e;var t=0,r,s,n,i=Object.prototype.toString.call(e);if(i==="[object Object]"?n=Object.create(e.__proto__||null):i==="[object Array]"?n=Array(e.length):i==="[object Set]"?(n=new Set,e.forEach(function(f){n.add(P(f))})):i==="[object Map]"?(n=new Map,e.forEach(function(f,y){n.set(P(y),P(f))})):i==="[object Date]"?n=new Date(+e):i==="[object RegExp]"?n=new RegExp(e.source,e.flags):i==="[object DataView]"?n=new e.constructor(P(e.buffer)):i==="[object ArrayBuffer]"?n=e.slice(0):i.slice(-6)==="Array]"&&(n=new e.constructor(e)),n){for(s=Object.getOwnPropertySymbols(e);t<s.length;t++)C(n,s[t],Object.getOwnPropertyDescriptor(e,s[t]));for(t=0,s=Object.getOwnPropertyNames(e);t<s.length;t++)Object.hasOwnProperty.call(n,r=s[t])&&n[r]===e[r]||C(n,r,Object.getOwnPropertyDescriptor(e,r))}return n||e}function R(e,t,r){const s=et(e);if(s.length===0)return r;const n=P(r);if(s.length===1)return n[s[0]]=t,n;let i=n[s[0]];for(let f=1;f<s.length-1;f+=1){if(i===void 0)return n;i=i[s[f]]}return i[s[s.length-1]]=t,n}function gt(e,{from:t,to:r},s){const n=w(e,s);if(!Array.isArray(n))return s;const i=[...n],f=n[t];return i.splice(t,1),i.splice(r,0,f),R(e,i,s)}function St(e,t,r,s){const n=w(e,s);if(!Array.isArray(n))return s;const i=[...n];return i.splice(typeof r=="number"?r:i.length,0,t),R(e,i,s)}function At(e,t,r){const s=w(e,r);return Array.isArray(s)?R(e,s.filter((n,i)=>i!==t),r):r}function x(e){const t=W(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function q(e,t,r="",s={}){return typeof e!="object"||e===null?s:Object.keys(e).reduce((n,i)=>{const f=e[i],y=`${r===""?"":`${r}.`}${i}`,c=w(y,t);let E=!1;return typeof f=="function"&&(n[y]=f(c,t,y)),typeof f=="object"&&Array.isArray(c)&&(E=!0,c.forEach((j,m)=>q(f,t,`${y}.${m}`,n))),typeof f=="object"&&typeof c=="object"&&c!==null&&(E||q(f,t,y,n)),n},s)}function H(e,t){return x(typeof e=="function"?e(t):q(e,t))}function L(e,t,r){if(typeof e!="string")return{hasError:!1,error:null};const s=H(t,r),n=Object.keys(s.errors).find(i=>e.split(".").every((f,y)=>f===i.split(".")[y]));return{hasError:!!n,error:n?s.errors[n]:null}}const Pt="__MANTINE_FORM_INDEX__";function V(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Pt}`)):!1:!1}function _t({name:e,initialValues:t={},initialErrors:r={},initialDirty:s={},initialTouched:n={},clearInputErrorOnChange:i=!0,validateInputOnChange:f=!1,validateInputOnBlur:y=!1,onValuesChange:c,transformValues:E=m=>m,validate:j}={}){const[m,_]=d.useState(n),[T,D]=d.useState(s),[b,g]=d.useState(t),[B,S]=d.useState(W(r)),I=d.useRef(t),K=o=>{I.current=o},X=d.useCallback(()=>_({}),[]),rt=o=>{const l=o?{...b,...o}:b;K(l),D({})},N=d.useCallback(o=>S(l=>W(typeof o=="function"?o(l):o)),[]),M=d.useCallback(()=>S({}),[]),z=d.useCallback(()=>{g(I.current),M(),D({}),X()},[]),k=d.useCallback((o,l)=>N(u=>({...u,[o]:l})),[]),F=d.useCallback(o=>N(l=>{if(typeof o!="string")return l;const u={...l};return delete u[o],u}),[]),v=d.useCallback(o=>D(l=>{if(typeof o!="string")return l;const u=tt(o,l);return delete u[o],u}),[]),Z=d.useCallback((o,l)=>{const u=V(o,f);v(o),_(a=>({...a,[o]:!0})),g(a=>{const $=R(o,l,a);if(u){const O=L(o,j,$);O.hasError?k(o,O.error):F(o)}return c==null||c($),$}),!u&&i&&k(o,null)},[]),ot=d.useCallback(o=>{g(l=>{const u=typeof o=="function"?o(l):o,a={...l,...u};return c==null||c(a),a}),i&&M()},[]),nt=d.useCallback((o,l)=>{v(o),g(u=>{const a=gt(o,l,u);return c==null||c(a),a}),S(u=>wt(o,l,u))},[]),st=d.useCallback((o,l)=>{v(o),g(u=>{const a=At(o,l,u);return c==null||c(a),a}),S(u=>Y(o,l,u,-1))},[]),it=d.useCallback((o,l,u)=>{v(o),g(a=>{const $=St(o,l,u,a);return c==null||c($),$}),S(a=>Y(o,u,a,1))},[]),h=d.useCallback(()=>{const o=H(j,b);return S(o.errors),o},[b,j]),ct=d.useCallback(o=>{const l=L(o,j,b);return l.hasError?k(o,l.error):F(o),l},[b,j]),ft=(o,{type:l="input",withError:u=!0,withFocus:a=!0}={})=>{const O={onChange:Ot(A=>Z(o,A))};return u&&(O.error=B[o]),l==="checkbox"?O.checked=w(o,b):O.value=w(o,b),a&&(O.onFocus=()=>_(A=>({...A,[o]:!0})),O.onBlur=()=>{if(V(o,y)){const A=L(o,j,b);A.hasError?k(o,A.error):F(o)}}),O},lt=(o,l)=>u=>{u==null||u.preventDefault();const a=h();a.hasErrors?l==null||l(a.errors,b,u):o==null||o(E(b),u)},ut=o=>E(o||b),dt=d.useCallback(o=>{o.preventDefault(),z()},[]),at=o=>{if(o){const u=w(o,T);if(typeof u=="boolean")return u;const a=w(o,b),$=w(o,I.current);return!J(a,$)}return Object.keys(T).length>0?Q(T):!J(b,I.current)},yt=d.useCallback(o=>Q(m,o),[m]),bt=d.useCallback(o=>o?!L(o,j,b).hasError:!H(j,b).hasErrors,[b,j]),G={values:b,errors:B,setValues:ot,setInitialValues:K,setErrors:N,setFieldValue:Z,setFieldError:k,clearFieldError:F,clearErrors:M,reset:z,validate:h,validateField:ct,reorderListItem:nt,removeListItem:st,insertListItem:it,getInputProps:ft,onSubmit:lt,onReset:dt,isDirty:at,isTouched:yt,setTouched:_,setDirty:D,resetTouched:X,resetDirty:rt,isValid:bt,getTransformedValues:ut};return $t(e,G),G}export{_t as u};
