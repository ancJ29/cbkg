import{E as n,F as g,x as c,a9 as v}from"./index-db117989.js";import{c as D}from"./phone-number-949134fe.js";var m=(a=>(a.PENDING="Pending",a.CONFIRMED="Confirmed",a.RESERVED="Reserved",a.COMPLETED="Completed",a.ARRIVED="Arrived",a.CANCELLED="Cancelled",a))(m||{}),h=(a=>(a.PENDING="Pending",a.CONFIRMED="Confirmed",a.COMPLETED="Completed",a))(h||{}),p=(a=>(a.NEW="New Customer",a.OLD="Old Customer",a))(p||{});const Y=Object.keys(m).map(a=>({value:a,label:m[a]})),L=Object.keys(h).map(a=>{const t=h[a];return{value:a,label:t}}),P=Object.keys(p).map(a=>({value:a,label:p[a]}));async function N(a,s){var d,e;let t=[];a!=null&&a.statuses&&(Array.isArray(a.status)&&((d=a==null?void 0:a.status)!=null&&d.length)?t=a.statuses:typeof a.status=="string"&&(t=[a.status]));let r=await M({cursor:s,name:((e=a==null?void 0:a.keyword)==null?void 0:e.trim())||void 0,phone:D(a==null?void 0:a.phone)||void 0,branchId:(a==null?void 0:a.branchId)||void 0,statuses:t.length>0?t:void 0,from:a!=null&&a.from?n(a.from).toISOString():void 0,to:a!=null&&a.to?n(a.to).toISOString():void 0});r=r.filter(o=>{var y,w;if(a!=null&&a.keyword){const I=a.keyword.trim().toLocaleLowerCase(),C=((y=o==null?void 0:o.contact)==null?void 0:y.toLocaleLowerCase())||"",b=((w=o==null?void 0:o.phone)==null?void 0:w.toLocaleLowerCase())||"";if(!C.includes(I)&&!b.includes(I))return!1}return!0});const{chainsById:u,branchesById:i}=g.getState();return r.map(o=>(o.branchId&&(o.branch=i[o.branchId]),o!=null&&o.chainId&&(o.chain=u[o.chainId]),o.time=n(o.from).format("HH:mm"),o))}async function M({cursor:a,branchId:s,statuses:t,name:r,phone:u,from:i,to:d}={}){const e=await c({action:"get-reservations",params:{take:100,cursor:a,phone:u,name:r,branchIds:s?[s]:void 0,statuses:t,from:i,to:d},options:{noCache:!0}});return(e==null?void 0:e.reservations)||[]}async function O(a){const s=new Date(`${n(a.date).format("YYYY-MM-DD")} ${a.time} GMT+7`);if(s.getTime()<Date.now()){v("Invalid time");return}return await c({params:{branchId:a.branchId,contact:a.contact,phone:D(a.phone),from:s.toISOString(),note:a.note||"",children:a.children||0,adults:a.adults||0,status:a.status},action:"add-reservation",options:{showToastMessage:!0}})}async function k(a){if(n(`${n(a.date).format("YYYY-MM-DD")} ${a.time}`).isBefore(n())){v("Invalid time");return}return await c({action:"add-reservation-by-end-user",options:{showToastMessage:!0},params:a})}async function $(a){if(n(`${n(a.date).format("YYYY-MM-DD")} ${a.time}`).isBefore(n())){v("Invalid time");return}return await c({action:"confirm-reservation-by-code",options:{showToastMessage:!0},params:a})}async function j(a){return await c({params:a,action:"update-reservation",options:{showToastMessage:!0}})}export{Y as B,P as C,L as S,O as a,m as b,k as c,$ as d,N as g,j as u};
