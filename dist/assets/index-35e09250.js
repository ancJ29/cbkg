import{f as te,u as de,j as _e,R as f,B as w,l as jt,n as ge,o as Wt,r as j,D as qt,s as ue,E as p,q as Kt,t,a as ut,w as Qt,F as qe,C as It}from"./index-db117989.js";import{P as Ke}from"./index-94ada444.js";import{i as Jt,g as Xt,a as Zt,u as es,C as Z,O as ts,S as T,I as Qe}from"./index-4ee7a327.js";import{T as K}from"./index-83819ef0.js";import{A as ss}from"./ActionIcon-397f6903.js";import{s as as,u as ls,a as ht,C as vt,H as ns,p as os,T as rs,N as je,D as _t,b as He}from"./DatePickerInput-19664968.js";import{u as se}from"./useTranslation-d9fa93c2.js";import{a as is,S as cs,C as yt,u as ds,B as Nt,g as us,b as hs}from"./index-182cb779.js";import{c as Je,i as Ct,f as ps}from"./phone-number-949134fe.js";import{u as Xe}from"./use-form-b89b14d2.js";import{M as wt,a as Be}from"./Modal-27160204.js";import{u as pt,a as ms,S as L,F as v}from"./Stack-0cc441d2.js";import{a as St,b as fs,I as Dt,u as bs,d as xs,e as Ue,T as N,B as Y,C as gs}from"./Card-23a5932e.js";import{C as Pt,a as js,P as Ge}from"./CloseButton-9718e38f.js";import{M as We,B as kt,c as mt}from"./index-71492496.js";import{D as ft,a as Is}from"./index-174989c0.js";import{T as vs}from"./index-a90a0539.js";import{I as _s}from"./index-4fa6584e.js";import"./CheckIcon-ad231d07.js";import"./AccordionChevron-4b7e97f1.js";const[ys,Ze]=St(),[Ns,Cs]=St();var ye={root:"m-7cda1cd6","root--default":"m-44da308b","root--contrast":"m-e3a01f8",label:"m-1e0e6180",remove:"m-ae386778",group:"m-1dcfd90b"};const ws={},Ss=jt((e,{gap:l},{size:s})=>({group:{"--pg-gap":l!==void 0?ge(l):ge(s,"pg-gap")}})),et=te((e,l)=>{const s=de("PillGroup",ws,e),{classNames:n,className:i,style:o,styles:a,unstyled:m,vars:r,size:c,disabled:d,...h}=s,b=Ze(),u=(b==null?void 0:b.size)||c||void 0,g=_e({name:"PillGroup",classes:ye,props:s,className:i,style:o,classNames:n,styles:a,unstyled:m,vars:r,varsResolver:Ss,stylesCtx:{size:u},rootSelector:"group"});return f.createElement(Ns,{value:{size:u,disabled:d}},f.createElement(w,{ref:l,size:u,...g("group"),...h}))});et.classes=ye;et.displayName="@mantine/core/PillGroup";const Ds={variant:"default"},Ps=jt((e,{radius:l},{size:s})=>({root:{"--pill-fz":ge(s,"pill-fz"),"--pill-height":ge(s,"pill-height"),"--pill-radius":l===void 0?void 0:Wt(l)}})),ee=te((e,l)=>{const s=de("Pill",Ds,e),{classNames:n,className:i,style:o,styles:a,unstyled:m,vars:r,variant:c,children:d,withRemoveButton:h,onRemove:b,removeButtonProps:u,radius:g,size:_,disabled:V,...y}=s,C=Cs(),D=Ze(),M=_||(C==null?void 0:C.size)||void 0,O=(D==null?void 0:D.variant)==="filled"?"contrast":c||"default",H=_e({name:"Pill",classes:ye,props:s,className:i,style:o,classNames:n,styles:a,unstyled:m,vars:r,varsResolver:Ps,stylesCtx:{size:M}});return f.createElement(w,{component:"span",ref:l,variant:O,size:M,...H("root",{variant:O}),mod:{"with-remove":h,disabled:V||(C==null?void 0:C.disabled)},...y},f.createElement("span",{...H("label")},d),h&&f.createElement(Pt,{variant:"transparent",radius:g,tabIndex:-1,"aria-hidden":!0,unstyled:m,...u,...H("remove",{className:u==null?void 0:u.className,style:u==null?void 0:u.style}),onMouseDown:E=>{var z;E.preventDefault(),E.stopPropagation(),(z=u==null?void 0:u.onMouseDown)==null||z.call(u,E)},onClick:E=>{var z;E.stopPropagation(),b==null||b(),(z=u==null?void 0:u.onClick)==null||z.call(u,E)}}))});ee.classes=ye;ee.displayName="@mantine/core/Pill";ee.Group=et;var Mt={field:"m-45c4369d"};const ks={type:"visible"},tt=te((e,l)=>{const s=de("PillsInputField",ks,e),{classNames:n,className:i,style:o,styles:a,unstyled:m,vars:r,type:c,disabled:d,id:h,pointer:b,...u}=s,g=Ze(),_=fs(),V=_e({name:"PillsInputField",classes:Mt,props:s,className:i,style:o,classNames:n,styles:a,unstyled:m,rootSelector:"field"}),y=d||(g==null?void 0:g.disabled);return f.createElement(w,{component:"input",ref:js(l,g==null?void 0:g.fieldRef),"data-type":c,disabled:y,mod:{disabled:y,pointer:b},...V("field"),...u,id:(_==null?void 0:_.inputId)||h,"aria-invalid":g==null?void 0:g.hasError,"aria-describedby":_==null?void 0:_.describedBy,type:"text",onMouseDown:C=>!b&&C.stopPropagation()})});tt.classes=Mt;tt.displayName="@mantine/core/PillsInputField";const Ms={},Ie=te((e,l)=>{const s=de("PillsInput",Ms,e),{children:n,onMouseDown:i,onClick:o,size:a,disabled:m,__staticSelector:r,error:c,variant:d,...h}=s,b=j.useRef();return f.createElement(ys,{value:{fieldRef:b,size:a,disabled:m,hasError:!!c,variant:d}},f.createElement(Dt,{size:a,error:c,variant:d,component:"div",ref:l,onMouseDown:u=>{var g;u.preventDefault(),i==null||i(u),(g=b.current)==null||g.focus()},onClick:u=>{var g;u.preventDefault(),o==null||o(u),(g=b.current)==null||g.focus()},...h,multiline:!0,disabled:m,__staticSelector:r||"PillsInput",withAria:!1},n))});Ie.displayName="@mantine/core/PillsInput";Ie.Field=tt;function Os({data:e,value:l}){const s=l.map(i=>i.trim().toLowerCase());return e.reduce((i,o)=>(Jt(o)?i.push({group:o.group,items:o.items.filter(a=>s.indexOf(a.value.toLowerCase().trim())===-1)}):s.indexOf(o.value.toLowerCase().trim())===-1&&i.push(o),i),[])}const $s={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},st=te((e,l)=>{const s=de("MultiSelect",$s,e),{classNames:n,className:i,style:o,styles:a,unstyled:m,vars:r,size:c,value:d,defaultValue:h,onChange:b,onKeyDown:u,variant:g,data:_,dropdownOpened:V,defaultDropdownOpened:y,onDropdownOpen:C,onDropdownClose:D,selectFirstOptionOnChange:M,onOptionSubmit:O,comboboxProps:H,filter:E,limit:z,withScrollArea:ae,maxDropdownHeight:Ne,searchValue:Ce,defaultSearchValue:he,onSearchChange:we,readOnly:U,disabled:R,onFocus:le,onBlur:ne,onPaste:Se,radius:A,rightSection:De,rightSectionWidth:Pe,rightSectionPointerEvents:Q,rightSectionProps:at,leftSection:ke,leftSectionWidth:Me,leftSectionPointerEvents:W,leftSectionProps:F,inputContainer:J,inputWrapperOrder:X,withAsterisk:Oe,labelProps:oe,descriptionProps:$e,errorProps:B,wrapperProps:Ve,description:Ee,label:Fe,error:pe,maxValues:Te,searchable:P,nothingFoundMessage:x,withCheckIcon:$,checkIconPosition:G,hidePickedOptions:lt,withErrorStyles:$t,name:Vt,form:Et,id:Ft,clearable:Tt,clearButtonProps:Yt,hiddenInputProps:zt,placeholder:nt,hiddenInputValuesDivider:Rt,...At}=s,Ye=bs(Ft),ze=Xt(_),me=Zt(ze),k=es({opened:V,defaultOpened:y,onDropdownOpen:C,onDropdownClose:()=>{D==null||D(),k.resetSelectedOption()}}),{styleProps:Bt,rest:{type:wa,...Gt}}=qt(At),[S,re]=pt({value:d,defaultValue:h,finalValue:[],onChange:b}),[fe,be]=pt({value:Ce,defaultValue:he,finalValue:"",onChange:we}),Re=_e({name:"MultiSelect",classes:{},props:s,classNames:n,styles:a,unstyled:m}),{resolvedClassNames:ot,resolvedStyles:rt}=ms({props:s,styles:a,classNames:n}),Lt=I=>{u==null||u(I),I.key===" "&&!P&&(I.preventDefault(),k.toggleDropdown()),I.key==="Backspace"&&fe.length===0&&S.length>0&&re(S.slice(0,S.length-1))},Ht=S.map((I,Ae)=>{var dt;return f.createElement(ee,{key:`${I}-${Ae}`,withRemoveButton:!U,onRemove:()=>re(S.filter(Ut=>I!==Ut)),unstyled:m,...Re("pill")},((dt=me[I])==null?void 0:dt.label)||I)});j.useEffect(()=>{M&&k.selectFirstOption()},[M,S]);const it=Tt&&S.length>0&&!R&&!U&&f.createElement(Z.ClearButton,{size:c,...Yt,onClear:()=>{re([]),be("")}}),ct=Os({data:ze,value:S});return f.createElement(f.Fragment,null,f.createElement(Z,{store:k,classNames:ot,styles:rt,unstyled:m,size:c,readOnly:U,__staticSelector:"MultiSelect",onOptionSubmit:I=>{O==null||O(I),be(""),k.updateSelectedOptionIndex("selected"),S.includes(me[I].value)?re(S.filter(Ae=>Ae!==me[I].value)):S.length<Te&&re([...S,me[I].value])},...H},f.createElement(Z.DropdownTarget,null,f.createElement(Ie,{...Bt,__staticSelector:"MultiSelect",classNames:ot,styles:rt,unstyled:m,size:c,className:i,style:o,variant:g,disabled:R,radius:A,rightSection:De||it||f.createElement(Z.Chevron,{size:c,error:pe,unstyled:m}),rightSectionPointerEvents:Q||(it?"all":"none"),rightSectionWidth:Pe,rightSectionProps:at,leftSection:ke,leftSectionWidth:Me,leftSectionPointerEvents:W,leftSectionProps:F,inputContainer:J,inputWrapperOrder:X,withAsterisk:Oe,labelProps:oe,descriptionProps:$e,errorProps:B,wrapperProps:Ve,description:Ee,label:Fe,error:pe,multiline:!0,withErrorStyles:$t,__stylesApiProps:{...s,multiline:!0},pointer:!P,onClick:()=>P?k.openDropdown():k.toggleDropdown(),"data-expanded":k.dropdownOpened||void 0,id:Ye},f.createElement(ee.Group,{disabled:R,unstyled:m,...Re("pillsList")},Ht,f.createElement(Z.EventsTarget,null,f.createElement(Ie.Field,{...Gt,ref:l,id:Ye,placeholder:nt,type:!P&&!nt?"hidden":"visible",...Re("inputField"),unstyled:m,onFocus:I=>{le==null||le(I),P&&k.openDropdown()},onBlur:I=>{ne==null||ne(I),k.closeDropdown(),P&&k.closeDropdown(),be("")},onKeyDown:Lt,value:fe,onChange:I=>{be(I.currentTarget.value),P&&k.openDropdown(),M&&k.selectFirstOption()},disabled:R,readOnly:U||!P,pointer:!P}))))),f.createElement(ts,{data:lt?ct:ze,hidden:U||R,filter:E,search:fe,limit:z,hiddenWhenEmpty:!P||!x||lt&&ct.length===0&&fe.trim().length===0,withScrollArea:ae,maxDropdownHeight:Ne,filterOptions:P,value:S,checkIconPosition:G,withCheckIcon:$,nothingFoundMessage:x,unstyled:m,labelId:`${Ye}-label`})),f.createElement("input",{type:"hidden",name:Vt,value:S.join(Rt),form:Et,disabled:R,...zt}))});st.classes={...Dt.classes,...Z.classes};st.displayName="@mantine/core/MultiSelect";var Vs=ue("adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]),bt=ue("calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]),Es=ue("clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]),Fs=ue("filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]),Ts=ue("printer","IconPrinter",[["path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4",key:"svg-1"}],["path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z",key:"svg-2"}]]);function Ys(e,l){if(!e||!l)return l;const s=e.getHours(),n=e.getMinutes(),i=e.getSeconds(),o=e.getMilliseconds(),a=new Date(l);return a.setHours(s),a.setMinutes(n),a.setSeconds(i),a.setMilliseconds(o),a}function zs(e,l){if(e===null)return null;const s=as("add",new Date(e),l);return Number.isNaN(s.getTime())||!e?null:s}function Rs({date:e,maxDate:l,minDate:s}){return!(e==null||Number.isNaN(e.getTime())||l&&p(e).isAfter(l,"date")||s&&p(e).isBefore(s,"date"))}const As={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,preserveTime:!0},ve=te((e,l)=>{const s=xs("DateInput",As,e),{inputProps:n,wrapperProps:i,value:o,defaultValue:a,onChange:m,clearable:r,clearButtonProps:c,popoverProps:d,getDayProps:h,locale:b,valueFormat:u,dateParser:g,minDate:_,maxDate:V,fixOnBlur:y,onFocus:C,onBlur:D,onClick:M,readOnly:O,name:H,form:E,rightSection:z,unstyled:ae,classNames:Ne,styles:Ce,allowDeselect:he,preserveTime:we,date:U,defaultDate:R,onDateChange:le,...ne}=s,[Se,A]=j.useState(!1),{calendarProps:De,others:Pe}=os(ne),Q=ls(),ke=g||(x=>{const $=p(x,u,Q.getLocale(b)).toDate();return Number.isNaN($.getTime())?zs(x,Q.getTimezone()):$}),Me=he!==void 0?he:r,W=x=>x?p(x).locale(Q.getLocale(b)).format(u):"",[F,J,X]=ht({type:"default",value:o,defaultValue:a,onChange:m}),[Oe,oe]=ht({type:"default",value:U,defaultValue:a||R,onChange:le});j.useEffect(()=>{X&&oe(o)},[X,o]);const[$e,B]=j.useState(W(F));j.useEffect(()=>{B(W(F))},[Q.getLocale(b)]);const Ve=x=>{const $=x.currentTarget.value;if(B($),A(!0),$.trim()===""&&r)J(null);else{const G=ke($);Rs({date:G,minDate:_,maxDate:V})&&(J(G),oe(G))}},Ee=x=>{D==null||D(x),A(!1),y&&B(W(F))},Fe=x=>{C==null||C(x),A(!0)},pe=x=>{M==null||M(x),A(!0)},Te=x=>({...h==null?void 0:h(x),selected:p(F).isSame(x,"day"),onClick:()=>{const $=we?Ys(F,x):x,G=r&&Me&&p(F).isSame(x,"day")?null:$;J(G),!X&&B(W(G)),A(!1)}}),P=z||(r&&F&&!O?f.createElement(Pt,{variant:"transparent",onMouseDown:x=>x.preventDefault(),tabIndex:-1,onClick:()=>{J(null),!X&&B(""),A(!1)},unstyled:ae,size:n.size||"sm",...c}):null);return Kt(()=>{o!==void 0&&!Se&&B(W(o))},[o]),f.createElement(f.Fragment,null,f.createElement(Ue.Wrapper,{...i,__staticSelector:"DateInput"},f.createElement(Ge,{opened:Se,trapFocus:!1,position:"bottom-start",disabled:O,withRoles:!1,unstyled:ae,...d},f.createElement(Ge.Target,null,f.createElement(Ue,{"data-dates-input":!0,"data-read-only":O||void 0,autoComplete:"off",ref:l,value:$e,onChange:Ve,onBlur:Ee,onFocus:Fe,onClick:pe,readOnly:O,rightSection:P,...n,...Pe,__staticSelector:"DateInput"})),f.createElement(Ge.Dropdown,{onMouseDown:x=>x.preventDefault(),"data-dates-dropdown":!0},f.createElement(vt,{__staticSelector:"DateInput",__timezoneApplied:!0,...De,classNames:Ne,styles:Ce,unstyled:ae,__preventFocus:!0,minDate:_,maxDate:V,locale:b,getDayProps:Te,size:n.size,date:Oe,onDateChange:oe})))),f.createElement(ns,{name:H,form:E,value:F,type:"default"}))});ve.classes={...Ue.classes,...vt.classes};ve.displayName="@mantine/dates/DateInput";const Ot=({...e})=>{const l=j.useRef(null),s=t.jsx(ss,{variant:"subtle",onClick:()=>{var n;return(n=l.current)==null?void 0:n.showPicker()},children:t.jsx(Es,{style:{width:ut(16),height:ut(16)},stroke:1.5})});return t.jsx(rs,{ref:l,rightSection:s,...e})},Bs="_container_14fmf_1",Gs="_container_2_14fmf_7",Ls="_container_3_14fmf_14",Hs="_body_14fmf_18",Us="_header_14fmf_24",q={container:Bs,container_2:Gs,container_3:Ls,body:Hs,header:Us},Ws={id:"",contact:"",chainId:null,branchId:null,status:null,phone:"",children:0,adults:1,time:p().startOf("h").add(1,"h").format("HH:MM"),date:p().startOf("day"),tableId:"",object:"",note:""},qs=({opened:e,close:l})=>{const s=se(),{user:n}=Qt(),{defaultChainId:i,defaultBranchId:o,chainOptions:a,branchOptionsByChainId:m}=qe(),r=Xe({initialValues:{...Ws,chainId:i,branchId:o},validate:Qs,transformValues:Ks}),c=j.useMemo(()=>m[r.values.chainId||""]||[],[m,r.values.chainId]),d=j.useCallback(async h=>{await is(h),l()},[l]);return t.jsx(wt,{onClose:l,opened:e,size:"60rem",centered:!0,title:s("Reserve"),padding:0,classNames:{header:q.header,title:"font-bold"},children:t.jsxs("form",{onSubmit:r.onSubmit(d),children:[t.jsxs(w,{className:q.body,children:[t.jsx(w,{className:"bdr-t",pb:10}),t.jsxs(L,{className:q.container,children:[t.jsx(T,{withAsterisk:!0,label:`${s("Select chains")}:`,placeholder:s("Select chains"),options:a,value:r.values.chainId||null,onChange:h=>r.setFieldValue("chainId",h)}),t.jsx(T,{withAsterisk:!0,placeholder:s("Select branches"),label:`${s("Select branches")}:`,options:c,value:r.values.branchId||null,onChange:h=>r.setFieldValue("branchId",h)}),t.jsx(T,{translation:!0,label:`${s("Select status")}:`,placeholder:s("Select status"),options:cs,classNames:{input:"text-main"},value:r.values.status,onChange:h=>r.setFieldValue("status",h)}),t.jsx(Ke,{withAsterisk:!0,labelClassName:"font-600",label:`${s("Phone")}:`,placeholder:s("Phone"),value:r.values.phone,onChangeValue:h=>r.setFieldValue("phone",h)}),t.jsx(K,{withAsterisk:!0,label:`${s("Customer Name")}:`,placeholder:s("Customer Name"),labelClassName:"font-600",...r.getInputProps("contact")}),t.jsxs(v,{gap:10,children:[t.jsx(je,{withAsterisk:!0,label:`${s("Adult")}:`,min:0,max:100,classNames:{label:"text-16"},...r.getInputProps("adults")}),t.jsx(je,{label:`${s("Child")}:`,min:0,max:100,classNames:{label:"text-16"},...r.getInputProps("children")})]})]}),t.jsxs(L,{className:q.container_2,children:[t.jsxs(v,{gap:10,className:"w-full",children:[t.jsx(Ot,{className:"w-full",label:s("Order time"),placeholder:s("Order time"),...r.getInputProps("time")}),t.jsx(_t,{valueFormat:"DD/MM/YYYY",className:"w-full",label:s("Date"),...r.getInputProps("date"),minDate:p().toDate()})]}),t.jsxs(v,{gap:10,children:[t.jsxs(v,{direction:"column",className:"w-full",children:[t.jsx(N,{className:"font-600",children:s("Table")}),t.jsxs(v,{children:[t.jsx(K,{className:"w-full",placeholder:s("Table"),...r.getInputProps("tableId")}),t.jsx(Y,{w:40,h:36,p:0,children:t.jsx(Qe,{})})]})]}),t.jsx(T,{translation:!0,className:"w-full",label:`${s("Object")}:`,placeholder:s("Object"),options:yt,value:r.values.object||null,onChange:h=>r.setFieldValue("object",h)})]})]}),t.jsx(He,{className:q.container_3,label:`${s("Customer's request")}:`,placeholder:`${s("Customer's request")}`,...r.getInputProps("note")}),t.jsxs(L,{className:q.container_2,children:[t.jsx(K,{disabled:!0,label:`${s("Order recipient")} :`,value:n==null?void 0:n.fullName}),t.jsx(K,{disabled:!0,label:`${s("Time of order receipt")} :`,value:p().format("hh:mm DD/MM/YYYY")})]}),t.jsx(He,{className:q.container_3,label:`${s("Note")}:`,placeholder:`${s("Note")}`})]}),t.jsx(It,{my:20,children:t.jsx(Y,{type:"submit",disabled:!r.isValid(),children:s("Create")})})]})})};function Ks(e){var l,s,n,i,o;return{id:(l=e.id)==null?void 0:l.trim(),contact:(s=e.contact)==null?void 0:s.trim(),chainId:e.chainId&&e.chainId.trim(),branchId:e.branchId&&e.branchId.trim(),status:e.status,phone:Je(e.phone),time:e.time,date:e.date,adults:e.adults||0,children:e.children||1,tableId:(n=e.tableId)==null?void 0:n.trim(),object:(i=e.object)==null?void 0:i.trim(),note:(o=e.note)==null?void 0:o.trim()}}function Qs(e){return{status:!e.status,time:!e.time,date:p(`${p(e.date).format("YYYY-MM-DD")} ${e.time} GMT+7`).isBefore(p()),contact:!e.contact,phone:!Ct(e.phone),chainId:!e.chainId,branchId:!e.branchId,adults:!e.adults||e.adults===0}}const Js="_container_14fmf_1",Xs="_container_2_14fmf_7",Zs="_container_3_14fmf_14",ea="_body_14fmf_18",ta="_header_14fmf_24",ie={container:Js,container_2:Xs,container_3:Zs,body:ea,header:ta},sa=({opened:e,close:l,data:s})=>{const n=se(),{chainOptions:i,branchOptionsByChainId:o}=qe(),a=Xe({initialValues:na(s),validate:la,transformValues:aa}),m=j.useMemo(()=>o[a.values.chainId||""]||[],[o,a.values.chainId]),r=j.useCallback(async d=>{await ds(d)&&l()},[l]),c=j.useMemo(()=>{const d=new Date(`${p(s.date).format("YYYY-MM-DD")} ${s.time} GMT+7`);return p(d).isBefore(p())},[s.date,s.time]);return t.jsxs(wt,{onClose:l,opened:e,size:"60rem",centered:!0,title:n("Reserve"),padding:0,classNames:{header:ie.header,title:"font-bold"},children:[t.jsx("form",{onSubmit:a.onSubmit(r),children:t.jsxs(w,{className:ie.body,children:[t.jsx(w,{className:"bdr-t",pb:10}),t.jsxs(L,{className:ie.container,children:[t.jsx(w,{children:t.jsx(T,{disabled:!0,label:`${n("Select chains")}:`,placeholder:n("Select chains"),options:i,value:a.values.chainId||null})}),t.jsx(w,{children:t.jsx(T,{disabled:!0,placeholder:n("Select branches"),label:`${n("Select branches")}:`,options:m,value:a.values.branchId||null})}),t.jsx(w,{children:t.jsx(T,{translation:!0,label:`${n("Select status")}:`,placeholder:n("Select status"),options:Nt,classNames:{input:"text-main"},value:a.values.status,onChange:d=>a.setFieldValue("status",d)})}),t.jsx(w,{children:t.jsx(Ke,{labelClassName:"font-600",label:`${n("Phone")}:`,placeholder:n("Phone"),value:a.values.phone,onChangeValue:d=>a.setFieldValue("phone",d)})}),t.jsx(w,{children:t.jsx(K,{label:`${n("Customer Name")}:`,placeholder:n("Customer Name"),labelClassName:"font-600",...a.getInputProps("contact")})}),t.jsxs(v,{gap:10,children:[t.jsx(w,{children:t.jsx(je,{label:`${n("Adult")}:`,min:0,max:100,classNames:{label:"text-16"},...a.getInputProps("adults")})}),t.jsx(w,{children:t.jsx(je,{label:`${n("Child")}:`,min:0,max:100,classNames:{label:"text-16"},...a.getInputProps("children")})})]})]}),t.jsxs(L,{className:ie.container_2,children:[t.jsxs(v,{gap:10,className:"w-full",children:[t.jsx(Ot,{disabled:c,className:"w-full",label:n("Time"),placeholder:n("Time"),...a.getInputProps("time")}),t.jsx(_t,{disabled:c,valueFormat:"DD/MM/YYYY",className:"w-full",label:n("Date"),...a.getInputProps("date"),minDate:p().toDate()})]}),t.jsxs(v,{gap:10,children:[t.jsxs(v,{direction:"column",className:"w-full",children:[t.jsx(N,{className:"font-600",children:n("Table")}),t.jsxs(v,{children:[t.jsx(K,{className:"w-full",placeholder:n("Table"),...a.getInputProps("tableId")}),t.jsx(Y,{w:40,h:36,p:0,children:t.jsx(Qe,{})})]})]}),t.jsx(T,{translation:!0,className:"w-full",label:`${n("Object")}:`,placeholder:n("Object"),options:yt,value:a.values.object||null,onChange:d=>a.setFieldValue("object",d)})]})]}),t.jsx(He,{className:ie.container_3,label:`${n("Note")}:`,placeholder:`${n("Note")}:`,...a.getInputProps("note")})]})}),t.jsx(It,{my:20,children:t.jsx(Y,{onClick:()=>a.onSubmit(r)(),disabled:!a.isValid(),children:n("Update")})})]})};function aa(e){var l,s,n,i;return{contact:(l=e.contact)==null?void 0:l.toString().trim(),chainId:e.chainId&&e.chainId.toString().trim(),branchId:e.branchId&&e.branchId.toString().trim(),status:e.status,phone:Je(e.phone),time:e.time,from:e.date,code:e.code,adults:e.adults||0,children:e.children||1,tableId:(s=e.tableId)==null?void 0:s.trim(),object:(n=e.object)==null?void 0:n.trim(),note:(i=e.note)==null?void 0:i.trim()}}function la(e){return{status:!e.status,time:!e.time,date:p(`${p(e.date).format("DD-MM-YYYY")}`).isBefore(p()),contact:!e.contact,phone:!Ct(e.phone),chainId:!e.chainId,branchId:!e.branchId,adults:!e.adults||e.adults===0}}const na=e=>({code:e.code||"",contact:e.contact||"",chainId:e.chainId||null,branchId:e.branchId||null,status:e.status||null,phone:e.phone||"",children:e.children||0,adults:e.adults||1,time:e.time,date:e.date?p(e.date):p().startOf("day").add(1,"day"),tableId:e.tableId||"",object:e.object||"",note:e.note||""}),oa="_label_unlz2_1",ra={label:oa},ia=({options:e,translation:l=!1,value:s,placeholder:n,onEnter:i,...o})=>{const a=se(),m=e.map(({value:d,label:h},b)=>({value:d.toString(),label:l?a(h):h,isLastOption:b===e.length-1})),r=j.useMemo(()=>s.length>0?void 0:n,[n,s]),c=j.useCallback(d=>{d.key==="Enter"&&i&&(d.preventDefault(),d.stopPropagation(),i())},[i]);return t.jsx(st,{data:m,checkIconPosition:"right",rightSection:t.jsx(Qe,{size:16}),classNames:{input:"truncate h-16",label:ra.label},value:s,placeholder:r,onKeyDown:c,...o})},ca="_container_3qt3b_1",da="_label_3qt3b_14",Le={container:ca,label:da},xt=({onFilter:e})=>{const l=se(),{defaultChainId:s,defaultBranchId:n,chainOptions:i,branchOptionsByChainId:o}=qe(),a=Xe({initialValues:{keyword:"",branchId:n,chainId:s,from:p()||null,to:p().startOf("day").add(7,"day")||null},transformValues:ua}),m=j.useMemo(()=>o[a.values.chainId||""]||[],[o,a.values.chainId]),r=j.useCallback(c=>{var d,h;if(a.setFieldValue("chainId",c),c){const b=(h=(d=o[c])==null?void 0:d[0])==null?void 0:h.value;a.setFieldValue("branchId",(b||"").toString())}},[o,a]);return t.jsxs("div",{className:"w-full",children:[t.jsxs("form",{children:[t.jsxs(L,{className:Le.container,children:[t.jsx(T,{label:`${l("Select chains")}:`,placeholder:l("Select chains"),options:i,value:a.values.chainId||null,onChange:r}),t.jsx(T,{placeholder:l("Select branches"),label:`${l("Select branches")}:`,options:m,value:a.values.branchId||null,onChange:c=>{a.setFieldValue("branchId",c)},onOptionSubmit:()=>e&&e(a.values)}),t.jsx(ia,{translation:!0,label:`${l("Select status")}:`,placeholder:l("Select status"),options:Nt,value:a.values.statuses||[],onChange:c=>{a.setFieldValue("statuses",c)}}),t.jsx(K,{label:l("Customer Name"),labelClassName:Le.label,placeholder:l("Customer Name"),onEnter:()=>e&&e(a.values),...a.getInputProps("keyword")}),t.jsx(Ke,{label:l("Phone Number"),labelClassName:Le.label,placeholder:l("Phone Number"),value:a.values.phone,onChangeValue:c=>a.setFieldValue("phone",c),onEnter:()=>e&&e(a.values)}),t.jsxs(L,{gap:0,className:"w-full",children:[t.jsx(N,{className:"font-600",children:l("Order date")}),t.jsxs(v,{gap:10,className:"w-full",align:"center",children:[t.jsx(ve,{rightSection:t.jsx(bt,{stroke:1.5}),valueFormat:"DD/MM/YYYY",placeholder:l("From"),className:"w-full",classNames:{label:"font-600 text-16"},onChange:c=>{const d=c?p(c):void 0;a.setFieldValue("from",d)},value:a.values.from?p(a.values.from).toDate():null,maxDate:a.values.to?p(a.values.to).toDate():void 0}),"~",t.jsx(ve,{rightSection:t.jsx(bt,{stroke:1.5}),valueFormat:"DD/MM/YYYY",placeholder:l("To"),className:"w-full",classNames:{label:"font-600 text-16"},onChange:c=>{const d=c?p(c):void 0;a.setFieldValue("to",d)},value:a.values.to?p(a.values.to).toDate():null,minDate:a.values.from?p(a.values.from).toDate():void 0})]})]})]}),t.jsx(We,{children:t.jsx(w,{pos:"absolute",bottom:30,left:0,w:"100%",children:t.jsxs(v,{gap:10,p:16,children:[t.jsx(Y,{variant:"outline",className:"w-full",onClick:a.reset,children:l("Clear filter")}),t.jsx(Y,{className:"w-full",onClick:()=>e&&e(a.values),children:l("Apply")})]})})})]}),t.jsx(kt,{children:t.jsxs(v,{mt:20,w:"100%",justify:"end",gap:10,children:[t.jsx(Y,{onClick:()=>e&&e(a.values),children:l("Apply")}),t.jsx(Y,{variant:"outline",onClick:a.reset,children:l("Clear filter")})]})})]})},ua=e=>({branchId:e.branchId||"",chainId:e.chainId||"",date:e.date||p(),to:e.to||null,keyword:e.keyword||"",phone:Je(e.phone||""),from:e.from||null}),ha="_item_190te_1",pa="_label_190te_12",ma="_value_190te_33",fa="_itemDetail_190te_39",xe={item:ha,label:pa,value:ma,itemDetail:fa};function ba({data:e,onClick:l,_records:s}){const n=se();return t.jsx(t.Fragment,{children:e.length>0&&e.map((i,o)=>t.jsx(w,{className:xe.item,onClick:()=>l&&l(i),children:s(i,n).map(({label:a,style:m,value:r},c)=>t.jsxs(w,{style:m,className:xe.itemDetail,children:[t.jsx(N,{className:xe.label,children:n(a||"")}),t.jsx(N,{className:xe.value,children:r})]},c))},o))})}const xa="_container_rcpkf_1",ga="_tableWrapper_rcpkf_7",ja="_header_rcpkf_11",Ia="_item_rcpkf_18",va="_label_rcpkf_29",_a="_itemDetail_rcpkf_33",ya="_filter_rcpkf_37",Na="_filterItem_rcpkf_41",Ca="_btn_rcpkf_51",ce={container:xa,tableWrapper:ga,header:ja,item:Ia,label:va,itemDetail:_a,filter:ya,filterItem:Na,btn:Ca},Wa=()=>{const e=se(),[l,{open:s,close:n}]=Be(!1),[i]=j.useState(()=>gt()),[o,a]=j.useState([]),[m,{toggle:r}]=Be(!1),[c,{open:d,close:h}]=Be(!1),[b,u]=j.useState(null),g=j.useCallback(y=>{u(y),d()},[d]),_=j.useCallback(async y=>us(y||{}).then(a),[]);j.useEffect(()=>{_()},[_]);const V=j.useMemo(()=>{const y=p().format("YYYY-MM-DD");return o.reduce((C,D)=>{const M=p(D.date).format("YYYY-MM-DD");return y===M?C+1:C},0)},[o]);return t.jsxs(L,{gap:10,bg:"gray.1",w:"100%",h:"100%",p:10,pos:"relative",children:[t.jsxs(gs,{withBorder:!0,shadow:"md",w:"100%",children:[t.jsxs(v,{className:"bdr-b",justify:"space-between",children:[t.jsx(N,{fz:16,fw:"bold",pb:5,children:e("Reservation list")}),t.jsxs(v,{children:[t.jsx(ft,{className:mt("flx-ct",ce.filterItem),onClick:()=>window.print(),children:t.jsx(Ts,{stroke:1,size:20})}),t.jsx(ft,{className:mt("flx-ct",ce.filter),onClick:r,children:t.jsx(Fs,{stroke:1,size:20})})]})]}),t.jsx(We,{children:t.jsx(Is,{opened:m,onClose:r,title:e("Filter by"),position:"right",transitionProps:{duration:0},classNames:{title:"font-bold"},children:t.jsx(xt,{onFilter:y=>{_(y).then(r)}})})}),t.jsx(kt,{children:t.jsx(v,{my:20,justify:"space-between",align:"flex-start",children:t.jsx(xt,{onFilter:y=>{_(y)}})})}),t.jsxs(v,{className:ce.label,children:[t.jsxs(N,{fw:500,children:[e("Current dining table count: "),t.jsx("span",{className:"text-hight-light",children:"0"}),"/0"]}),t.jsxs(N,{fw:500,children:[e("Current number of guests: "),t.jsx("span",{className:"text-hight-light",children:V||0}),"/",o.length]})]}),t.jsx(vs,{headers:i,dataLength:(o==null?void 0:o.length)||0,rows:t.jsx(ba,{data:o,onClick:g,_records:gt}),hasMore:!1,haveAction:!1,headerClassName:ce.header})]}),t.jsx(Y,{className:ce.btn,onClick:s,children:"+"}),t.jsx(We,{children:t.jsx(v,{w:"100%",pos:"fixed",bottom:"2rem",justify:"center",children:t.jsx(Y,{radius:999,variant:"outline",onClick:r,px:10,bg:"#ced4da",children:t.jsxs(v,{align:"center",gap:30,children:[t.jsxs("div",{className:"flx-ct",children:[t.jsx(_s,{}),t.jsx(N,{children:"Search"})]}),t.jsxs("div",{className:"flx-ct",children:[t.jsx(Vs,{}),"Filter"]})]})})})}),t.jsx(qs,{close:n,opened:l}),b&&t.jsx(sa,{opened:c,close:()=>{h(),u(null)},data:b})]})},gt=(e,l)=>{var s,n,i;return[{style:{width:"280px"},label:"Chain",value:e?t.jsxs(N,{children:[" ",((s=e==null?void 0:e.chain)==null?void 0:s.name)||"-"]}):""},{style:{width:"150px"},label:"Branch",value:t.jsxs(N,{children:[" ",((n=e==null?void 0:e.branch)==null?void 0:n.shortName)||"-"]})},{style:{width:"150px",display:"flex",justifyContent:"center"},label:"Status",value:t.jsx(ee,{classNames:{root:`bg-${(i=e==null?void 0:e.status)==null?void 0:i.toString().toLocaleLowerCase()}-status text-white`},children:l&&l(hs[e==null?void 0:e.status])||"-"})},{style:{width:"150px"},label:"Phone",value:t.jsxs(N,{children:[" ",ps((e==null?void 0:e.phone)||"-")]})},{style:{width:"150px"},label:"Customer Name",value:e?t.jsxs(N,{children:[" ",(e==null?void 0:e.contact)||"-"]}):""},{style:{width:"100px"},label:"Quantity",value:t.jsxs(N,{children:[" ",0]})},{style:{width:"150px"},label:"Order date",value:t.jsxs(N,{children:[p(e==null?void 0:e.from).format("DD-MM-YYYY")||"-",t.jsx("br",{}),p(e==null?void 0:e.from).format("HH:mm")||"-"]})},{style:{width:"100px"},label:"Table",value:e?t.jsxs(N,{children:[" ",(e==null?void 0:e.tableId)||"-"]}):""},{style:{width:"120px"},label:"Object",value:e?t.jsxs(N,{children:[" ",(e==null?void 0:e.object)||"-"]}):""},{style:{width:"200px"},label:"Required",value:e?t.jsxs(N,{children:[" ",(e==null?void 0:e.note)||"-"]}):""}]};export{Wa as default};
